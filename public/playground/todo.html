<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { margin: 0; padding: 0; }
  </style>
</head>
<body>
  <todo-app></todo-app>
  <script type="module">
import { component, html, signal } from "https://unpkg.com/esor@latest/dist/esor.js";

component("todo-app", () => {
  const todos = signal([
    { id: 1, text: "Learn Esor", done: false },
    { id: 2, text: "Build something awesome", done: false }
  ]);
  const input = signal("");

  const addTodo = () => {
    if (input().trim()) {
      todos([...todos(), { id: Date.now(), text: input(), done: false }]);
      input("");
    }
  };

  const toggleTodo = (id) => {
    todos(todos().map(t => t.id === id ? { ...t, done: !t.done } : t));
  };

  const removeTodo = (id) => {
    todos(todos().filter(t => t.id !== id));
  };

  return html`
    <style>
      :host {
        display: block;
        max-width: 500px;
        margin: 20px auto;
        padding: 20px;
        font-family: system-ui, sans-serif;
      }

      h1 {
        text-align: center;
        color: #2c3e50;
      }

      .input-group {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
      }

      input {
        flex: 1;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
      }

      button {
        padding: 10px 20px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      .todo-list {
        list-style: none;
        padding: 0;
      }

      .todo-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px;
        background: #f8f9fa;
        margin-bottom: 8px;
        border-radius: 4px;
      }

      .todo-item.done {
        opacity: 0.6;
        text-decoration: line-through;
      }

      .remove-btn {
        padding: 4px 8px;
        background: #e74c3c;
        font-size: 14px;
        margin-left: auto;
      }
    </style>

    <div>
      <h1>üìù My Tasks</h1>
      <div class="input-group">
        <input
          type="text"
          placeholder="Add a new task..."
          :value=\${input()}
          @input=\${(e) => input(e.target.value)}
          @keypress=\${(e) => e.key === 'Enter' && addTodo()}
        />
        <button @click=\${addTodo}>Add</button>
      </div>
      <ul class="todo-list">
        \${todos().map(todo => html`
          <li class="\${todo.done ? 'todo-item done' : 'todo-item'}" key=\${todo.id}>
            <input type="checkbox" :checked=\${todo.done} @change=\${() => toggleTodo(todo.id)} />
            <span>\${todo.text}</span>
            <button class="remove-btn" @click=\${() => removeTodo(todo.id)}>‚úï</button>
          </li>
        `)}
      </ul>
    </div>
  `;
});
  </script>
</body>
</html>
